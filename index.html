<?php
// db.php - اتصال به پایگاه داده
$host = 'localhost';
$db = 'accessory_shop';
$user = 'root';
$pass = '';

try {
    $pdo = new PDO("mysql:host=$host;dbname=$db", $user, $pass);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}
?>

<!-- index.php - صفحه اصلی سایت -->
<?php
include('db.php');

// دریافت محصولات از دیتابیس
$stmt = $pdo->query("SELECT * FROM products LIMIT 6");
$products = $stmt->fetchAll(PDO::FETCH_ASSOC);
?>
<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فروشگاه اکسسوری</title>
    <link href="https://fonts.googleapis.com/css2?family=Shabnam&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script> <!-- GSAP for animations -->
    <style>
        body {
            font-family: "Shabnam", sans-serif;
            background: #111;
            color: white;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #222;
            text-align: center;
            padding: 20px;
            font-size: 36px;
        }

        .menu {
            display: flex;
            justify-content: center;
            gap: 30px;
            background-color: #111;
            padding: 15px;
        }

        .menu a {
            color: white;
            text-decoration: none;
            padding: 10px;
            font-size: 18px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .menu a:hover {
            background-color: #3498db;
        }

        .product-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 30px;
        }

        .product-card {
            background-color: #222;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .product-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
        }

        .buy-button {
            padding: 12px 30px;
            background-color: #3498db;
            color: white;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }

        .buy-button:hover {
            background-color: #2980b9;
        }

        footer {
            text-align: center;
            background: #222;
            color: white;
            padding: 15px;
            position: fixed;
            width: 100%;
            bottom: 0;
        }
    </style>
</head>
<body>

<header>فروشگاه اکسسوری مدرن</header>

<div class="menu">
    <a href="#">خانه</a>
    <a href="#">محصولات</a>
    <a href="#">درباره ما</a>
    <a href="#">تماس با ما</a>
</div>

<div class="product-container">
    <?php foreach ($products as $product): ?>
        <div class="product-card">
            <img src="<?php echo $product['image_url']; ?>" alt="Product Image">
            <h3><?php echo $product['name']; ?></h3>
            <p><?php echo number_format($product['price'], 2); ?> تومان</p>
            <button class="buy-button" onclick="window.location.href='/product.php?id=<?php echo $product['id']; ?>'">خرید</button>
        </div>
    <?php endforeach; ?>
</div>

<footer>
    <p>تماس: 09199992134 | ایمیل: info@example.com</p>
    <p>مدیریت: طاها یاری جو</p>
</footer>

<script>
    // GSAP Animations
    gsap.from("header", { opacity: 0, y: -100, duration: 1 });
    gsap.from(".menu a", {
        opacity: 0,
        x: -50,
        stagger: 0.2,
        duration: 1
    });
    gsap.from(".product-card", {
        opacity: 0,
        y: 100,
        stagger: 0.3,
        duration: 1,
        delay: 0.5
    });
</script>

</body>
</html>

<!-- product.php - صفحه جزئیات محصول -->
<?php
include('db.php');

// دریافت اطلاعات محصول
$product_id = $_GET['id'];
$stmt = $pdo->prepare("SELECT * FROM products WHERE id = :id");
$stmt->execute(['id' => $product_id]);
$product = $stmt->fetch(PDO::FETCH_ASSOC);
?>

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جزئیات محصول</title>
    <style>
        body {
            font-family: "Shabnam", sans-serif;
            background: #111;
            color: white;
            margin: 0;
            padding: 0;
        }
        header { text-align: center; padding: 20px; font-size: 36px; background-color: #222; }
        .product-details { text-align: center; padding: 20px; }
        .product-details img { width: 300px; height: 300px; object-fit: cover; border-radius: 10px; }
        .buy-button {
            padding: 12px 30px;
            background-color: #3498db;
            color: white;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        .buy-button:hover { background-color: #2980b9; }
        footer { text-align: center; background: #222; color: white; padding: 15px; position: fixed; width: 100%; bottom: 0; }
    </style>
</head>
<body>

<header>جزئیات محصول</header>

<div class="product-details">
    <img src="<?php echo $product['image_url']; ?>" alt="Product Image">
    <h3><?php echo $product['name']; ?></h3>
    <p><?php echo number_format($product['price'], 2); ?> تومان</p>
    <p><?php echo $product['description']; ?></p>
    <button class="buy-button" onclick="window.location.href='/payment.php?id=<?php echo $product['id']; ?>'">خرید</button>
</div>

<footer>
    <p>تماس: 09199992134 | ایمیل: info@example.com</p>
    <p>مدیریت: طاها یاری جو</p>
</footer>

</body>
</html>

<!-- payment.php - صفحه پرداخت -->
<?php
include('db.php');

// دریافت اطلاعات محصول
$product_id = $_GET['id'];
$stmt = $pdo->prepare("SELECT * FROM products WHERE id = :id");
$stmt->execute(['id' => $product_id]);
$product = $stmt->fetch(PDO::FETCH_ASSOC);
?>

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پرداخت</title>
    <style>
        body {
            font-family: "Shabnam", sans-serif;
            background: #111;
            color: white;
            margin: 0;
            padding: 0;
        }
        header { text-align: center; padding: 20px; font-size: 36px; background-color: #222; }
        .payment-details { text-align: center; padding: 20px; }
        .buy-button {
            padding: 12px 30px;
            background-color: #3498db;
            color: white;
            font-size: 18px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        .buy-button:hover { background-color: #2980b9; }
        footer { text-align: center; background: #222; color: white; padding: 15px; position: fixed; width: 100%; bottom: 0; }
    </style>
</head>
<body>

<header>پرداخت محصول</header>

<div class="payment-details">
    <h3><?php echo $product['name']; ?></h3>
    <p><?php echo number_format($product['price'], 2); ?> تومان</p>
    <form method="POST" action="payment-gateway-link">
        <input type="hidden" name="amount" value="<?php echo $product['price']; ?>">
        <input type="submit" value="پرداخت" class="buy-button">
    </form>
</div>

<footer>
    <p>تماس: 09199992134 | ایمیل: info@example.com</p>
    <p>مدیریت: طاها یاری جو</p>
</footer>

</body>
</html>

<!-- login.php - صفحه ورود -->
<?php
session_start();

// بررسی ورود کاربر
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $username = 'ty';
    $password = '1342';

    $inputUsername = $_POST['username'];
    $inputPassword = $_POST['password'];

    if ($inputUsername === $username && $inputPassword === $password) {
        $_SESSION['admin'] = $inputUsername;
        header("Location: admin.php");
        exit();
    } else {
        echo "نام کاربری یا رمز عبور اشتباه است.";
    }
}
?>

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>ورود به پنل مدیریت</title>
</head>
<body>
    <h2>ورود به پنل مدیریت</h2>
    <form method="POST">
        <input type="text" name="username" placeholder="نام کاربری" required><br><br>
        <input type="password" name="password" placeholder="رمز عبور" required><br><br>
        <button type="submit">ورود</button>
    </form>
</body>
</html>

<!-- admin.php - پنل مدیریت -->
<?php
session_start();
if (!isset($_SESSION['admin'])) {
    header("Location: login.php");
    exit();
}

include('db.php');

$stmt = $pdo->query("SELECT * FROM products");
$products = $stmt->fetchAll(PDO::FETCH_ASSOC);
?>

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پنل مدیریت</title>
    <style>
        body {
            font-family: "Shabnam", sans-serif;
            background: #111;
            color: white;
        }
        header {
            background: #222;
            padding: 20px;
            text-align: center;
            font-size: 36px;
        }
        .sidebar {
            width: 200px;
            background: #222;
            color: white;
            position: fixed;
            height: 100%;
            padding-top: 20px;
        }
        .sidebar a {
            display: block;
            padding: 15px;
            text-decoration: none;
            color: white;
            border-bottom: 1px solid #444;
        }
        .sidebar a:hover {
            background: #3498db;
        }
        .content {
            margin-left: 220px;
            padding: 20px;
        }
        .product-table {
            width: 100%;
            border-collapse: collapse;
        }
        .product-table th, .product-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #444;
        }
        .product-table th {
            background-color: #3498db;
        }
        .btn {
            background-color: #3498db;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 5px;
        }
        footer {
            text-align: center;
            background: #222;
            color: white;
            padding: 15px;
            position: fixed;
            width: 100%;
            bottom: 0;
        }
    </style>
</head>
<body>

<header>پنل مدیریت محصولات</header>

<div class="sidebar">
    <a href="#">مدیریت محصولات</a>
    <a href="#">مدیریت سفارشات</a>
    <a href="logout.php">خروج</a>
</div>

<div class="content">
    <h2>لیست محصولات</h2>
    <table class="product-table">
        <tr>
            <th>نام محصول</th>
            <th>قیمت</th>
            <th>عملیات</th>
        </tr>
        <?php foreach ($products as $product): ?>
            <tr>
                <td><?php echo $product['name']; ?></td>
                <td><?php echo number_format($product['price'], 2); ?> تومان</td>
                <td><a href="edit-product.php?id=<?php echo $product['id']; ?>" class="btn">ویرایش</a> <a href="delete-product.php?id=<?php echo $product['id']; ?>" class="btn">حذف</a></td>
            </tr>
        <?php endforeach; ?>
    </table>
</div>

<footer>
    <p>تماس: 09199992134 | ایمیل: info@example.com</p>
    <p>مدیریت: طاها یاری جو</p>
</footer>

</body>
</html>

<!-- logout.php - خروج از پنل -->
<?php
session_start();
session_destroy();
header("Location: login.php");
exit();
?>
